/**
 * Usage:
 *
 * <div class="overflow-hidden">
 *   <div class="grid grid--col-2@sm grid--col-3@lg grid--space-3 grid--space-4@xl">
 *     <div>
 *       <div class="my-component">Foo</div>
 *     </div>
 *     <div>
 *       <div class="my-component">Bar</div>
 *     </div>
 *     <div>
 *       <div class="my-component">Baz</div>
 *     </div>
 *   </div>
 * </div>
 */

@use "../abstracts" as *;

.grid {
	display: flex;
	flex-wrap: wrap;
}

.grid > * {
	width: 100%;
}

/**
 * Columuns variants:
 *
 * <div class="grid grid--col-{value}"></div>
 * <div class="grid grid--col-{value}@{breakpoint}"></div>
 */

$columns-values: (1, 2, 3, 4);

@each $breakpoint-name, $breakpoint in $mq-breakpoints {
	$breakpoint-suffix: if($breakpoint, "\\@#{$breakpoint-name}", null);

	@include breakpoint($breakpoint-name) {
		@each $value in $columns-values {
			$base: grid--col-#{$value};

			.#{$base}#{$breakpoint-suffix} > * {
				width: percentage(1 / $value);
			}
		}
	}
}

/**
 * Spacing variants:
 *
 * <div class="grid grid--space-{value}"></div>
 * <div class="grid grid--space-{value}@{breakpoint}"></div>
 * <div class="grid grid--space-x-{value}"></div>
 * <div class="grid grid--space-x-{value}@{breakpoint}"></div>
 * <div class="grid grid--space-y-{value}"></div>
 * <div class="grid grid--space-y-{value}@{breakpoint}"></div>
 */

@each $breakpoint-name, $breakpoint in $mq-breakpoints {
	$breakpoint-suffix: if($breakpoint, "\\@#{$breakpoint-name}", null);

	@include breakpoint($breakpoint-name) {
		@each $name, $value in $spacings {
			$base: grid--space-#{$name};

			.#{$base}#{$breakpoint-suffix} {
				margin: ($value / 2 * -1);
			}

			.#{$base}#{$breakpoint-suffix} > * {
				padding: ($value / 2);
			}
		}

		@each $name, $value in $spacings {
			$base: grid--space-x-#{$name};

			.#{$base}#{$breakpoint-suffix} {
				margin-right: ($value / 2 * -1);
				margin-left: ($value / 2 * -1);
			}

			.#{$base}#{$breakpoint-suffix} > * {
				padding-right: ($value / 2);
				padding-left: ($value / 2);
			}
		}

		@each $name, $value in $spacings {
			$base: grid--space-y-#{$name};

			.#{$base}#{$breakpoint-suffix} {
				margin-top: ($value / 2 * -1);
				margin-bottom: ($value / 2 * -1);
			}

			.#{$base}#{$breakpoint-suffix} > * {
				padding-top: ($value / 2);
				padding-bottom: ($value / 2);
			}
		}
	}
}
